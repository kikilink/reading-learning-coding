# tcp协议详解

### 可靠性
序列号 确认应答 RTT(round trip time )重发 

收到确认消息后消息才能在缓冲区中清除


以段为单位发送数据
MSS选项

窗口控制提高速度
痛点
一个段发现等待一个确认应答

以窗口作为发送单位(多个段一起发送)
对端使用大量缓冲区

#### 滑动窗口
接收端收到消息发送确认后窗口往前滑动一段接受下一段的数据

#### 窗口控制重发控制
确认应答丢失没有必要进行重发
高速重发控制
同一个序号的确认应答重复不断返回

#### 流控制
窗口大小控制tcp首部属性
大于窗口大小数据停止接受数据，发送端发送窗口探测数据段获取新的窗口大小信息

#### 拥塞控制
发送端设置拥塞窗口大小。从小到大发送数据，每收到一个确认应答拥塞窗口就增大，跟接收端窗口大小进行比较。取较小的值

### 发送端
#### Nagle算法
```
延迟发送数据
已经发送的数据都收到确认值
达到MSS(maximun segment size )长度的数据
nodelay的设置true会马上发送

```

### 接收端
```
延迟确认应答机制
捎带应答。确认应答和返回数据可以通过一个包发送
```

